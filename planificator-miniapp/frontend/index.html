<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <style>
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        .modal-backdrop {
            background: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.2s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .progress-bar {
            transition: width 0.3s ease;
        }
        
        .sortable-ghost {
            opacity: 0.4;
        }
        
        .sortable-drag {
            cursor: move;
        }
        
        .draggable-item {
            cursor: grab;
        }
        
        .draggable-item:active {
            cursor: grabbing;
        }
        
        .search-result-item:hover {
            background: #f3f4f6;
        }
        
        /* –ö–∞–ª–µ–Ω–¥–∞—Ä—å */
        .calendar-day {
            min-height: 80px;
            border: 1px solid #e5e7eb;
        }
        
        .calendar-day.today {
            background: #dbeafe;
        }
        
        .calendar-day.other-month {
            background: #f9fafb;
            color: #9ca3af;
        }
        
        .calendar-task {
            font-size: 0.75rem;
            padding: 2px 4px;
            margin: 2px 0;
            border-radius: 4px;
            cursor: pointer;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-4 py-3">
            <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-2">
                    <button onclick="goBack()" id="backBtn" class="hidden text-gray-600 hover:text-gray-800">
                        ‚Üê –ù–∞–∑–∞–¥
                    </button>
                    <h1 class="text-xl font-bold text-gray-800" id="pageTitle">–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫</h1>
                </div>
                <p class="text-xs text-gray-500" id="userInfo">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
            
            <!-- –¢–∞–±—ã –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é -->
            <div class="flex gap-2 overflow-x-auto pb-1" id="mainTabs">
                <button onclick="switchTab('tasks')" id="tab-tasks" class="tab-btn px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors bg-blue-500 text-white">
                    –ó–∞–¥–∞—á–∏
                </button>
                <button onclick="switchTab('kanban')" id="tab-kanban" class="tab-btn px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors bg-gray-100 text-gray-600">
                    –î–æ—Å–∫–∞
                </button>
                <button onclick="switchTab('dashboard')" id="tab-dashboard" class="tab-btn px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors bg-gray-100 text-gray-600">
                    –î–∞—à–±–æ—Ä–¥
                </button>
                <button onclick="switchTab('calendar')" id="tab-calendar" class="tab-btn px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors bg-gray-100 text-gray-600">
                    –ö–∞–ª–µ–Ω–¥–∞—Ä—å
                </button>
                <button onclick="switchTab('projects')" id="tab-projects" class="tab-btn px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors bg-gray-100 text-gray-600">
                    –ü—Ä–æ–µ–∫—Ç—ã
                </button>
                <button onclick="switchTab('notes')" id="tab-notes" class="tab-btn px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors bg-gray-100 text-gray-600">
                    –ó–∞–º–µ—Ç–∫–∏
                </button>
                <button onclick="switchTab('settings')" id="tab-settings" class="tab-btn px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors bg-gray-100 text-gray-600">
                    –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
            </div>
            
            <!-- –¢–∞–±—ã workspace -->
            <div class="hidden gap-2 overflow-x-auto pb-1 mt-2" id="workspaceTabs">
                <button onclick="switchWorkspaceTab('overview')" id="ws-tab-overview" class="ws-tab-btn px-3 py-1.5 text-sm rounded-lg font-medium whitespace-nowrap transition-colors bg-blue-500 text-white">
                    üìä –û–±–∑–æ—Ä
                </button>
                <button onclick="switchWorkspaceTab('tasks')" id="ws-tab-tasks" class="ws-tab-btn px-3 py-1.5 text-sm rounded-lg font-medium whitespace-nowrap transition-colors bg-gray-100 text-gray-600">
                    ‚úÖ –ó–∞–¥–∞—á–∏
                </button>
                <button onclick="switchWorkspaceTab('subprojects')" id="ws-tab-subprojects" class="ws-tab-btn px-3 py-1.5 text-sm rounded-lg font-medium whitespace-nowrap transition-colors bg-gray-100 text-gray-600">
                    üìÅ –ü–æ–¥–ø—Ä–æ–µ–∫—Ç—ã
                </button>
                <button onclick="switchWorkspaceTab('roadmap')" id="ws-tab-roadmap" class="ws-tab-btn px-3 py-1.5 text-sm rounded-lg font-medium whitespace-nowrap transition-colors bg-gray-100 text-gray-600">
                    üó∫Ô∏è Roadmap
                </button>
                <button onclick="switchWorkspaceTab('notes')" id="ws-tab-notes" class="ws-tab-btn px-3 py-1.5 text-sm rounded-lg font-medium whitespace-nowrap transition-colors bg-gray-100 text-gray-600">
                    üìù –ó–∞–º–µ—Ç–∫–∏
                </button>
            </div>
        </div>
    </div>

    <div class="max-w-4xl mx-auto p-4">
        
        <!-- ========== –í–ö–õ–ê–î–ö–ê: –ó–ê–î–ê–ß–ò ========== -->
        <div id="view-tasks" class="tab-content">
            <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4">
                
                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∫–Ω–æ–ø–∫–æ–π –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h2 class="text-lg font-bold text-gray-800">–ú–æ–∏ –∑–∞–¥–∞—á–∏</h2>
                        <p class="text-sm text-gray-500">
                            <span id="taskCount">–í—Å–µ–≥–æ: 0</span> ‚Ä¢ 
                            <span id="completedCount">–í—ã–ø–æ–ª–Ω–µ–Ω–æ: 0</span>
                        </p>
                    </div>
                    <button 
                        onclick="toggleTaskForm()"
                        id="toggleTaskFormBtn"
                        class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 active:bg-blue-700 transition-colors flex items-center gap-2"
                    >
                        <span>+</span>
                        <span class="hidden sm:inline">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</span>
                    </button>
                </div>
                
                <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
                <div id="taskFormContainer" class="hidden mb-4 p-4 bg-gray-50 rounded-lg border-2 border-blue-200">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="font-semibold text-gray-700">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h3>
                        <button onclick="toggleTaskForm()" class="text-gray-500 hover:text-gray-700">‚úï</button>
                    </div>
                    
                    <input 
                        type="text" 
                        id="newTaskInput" 
                        placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏..."
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2"
                        onkeypress="if(event.key === 'Enter') addTask()"
                    >
                    
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-2 mb-2">
                        <select id="taskProject" class="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">–ë–µ–∑ –ø—Ä–æ–µ–∫—Ç–∞</option>
                        </select>
                        
                        <select id="taskPriority" class="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="low">üü¢ –ù–∏–∑–∫–∏–π</option>
                            <option value="medium" selected>üü° –°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="high">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                        </select>
                        
                        <input 
                            type="datetime-local" 
                            id="taskDeadline" 
                            class="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        >
                    </div>
                    
                    <button 
                        onclick="addTask()"
                        class="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 active:bg-blue-700 transition-colors"
                    >
                        –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </div>
                
                <!-- –§–∏–ª—å—Ç—Ä—ã -->
                <div class="mb-4">
                    <button 
                        onclick="toggleTaskFilters()"
                        class="text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1"
                    >
                        <span id="filterIcon">‚ñ∂</span> –§–∏–ª—å—Ç—Ä—ã
                    </button>
                    
                    <div id="taskFiltersContainer" class="hidden mt-2 grid grid-cols-1 sm:grid-cols-3 gap-2">
                        <select id="filterProject" onchange="loadTasks()" class="px-3 py-2 text-sm border rounded-lg">
                            <option value="">–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</option>
                        </select>
                        
                        <select id="filterPriority" onchange="loadTasks()" class="px-3 py-2 text-sm border rounded-lg">
                            <option value="">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                            <option value="high">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                            <option value="medium">üü° –°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="low">üü¢ –ù–∏–∑–∫–∏–π</option>
                        </select>
                        
                        <select id="filterCompleted" onchange="loadTasks()" class="px-3 py-2 text-sm border rounded-lg">
                            <option value="">–í—Å–µ –∑–∞–¥–∞—á–∏</option>
                            <option value="false">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                            <option value="true">–ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ</option>
                        </select>
                    </div>
                </div>
                
                <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
                <div id="taskList" class="space-y-2">
                    <p class="text-center text-gray-400 py-8">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                </div>
            </div>
        </div>
        
        <!-- ========== –í–ö–õ–ê–î–ö–ê: –î–û–°–ö–ê –ó–ê–î–ê–ß ========== -->
        <div id="view-kanban" class="tab-content hidden">
            <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4">
                
                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∫–Ω–æ–ø–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-bold text-gray-800">üìã –î–æ—Å–∫–∞ –∑–∞–¥–∞—á</h2>
                    <button 
                        onclick="toggleKanbanFilters()"
                        class="px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1"
                    >
                        <span>üîç</span>
                        <span id="kanbanFilterIcon">–§–∏–ª—å—Ç—Ä—ã</span>
                    </button>
                </div>
                
                <!-- –§–∏–ª—å—Ç—Ä—ã –∫–∞–Ω–±–∞–Ω–∞ -->
                <div id="kanbanFiltersContainer" class="hidden mb-4 p-3 bg-gray-50 rounded-lg border">
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-2">
                        <select id="kanbanFilterProject" onchange="loadKanban()" class="px-3 py-2 text-sm border rounded-lg bg-white">
                            <option value="">üìÅ –í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</option>
                        </select>
                        
                        <select id="kanbanFilterSubproject" onchange="loadKanban()" class="px-3 py-2 text-sm border rounded-lg bg-white">
                            <option value="">üë§ –í—Å–µ –ø–æ–¥–ø—Ä–æ–µ–∫—Ç—ã</option>
                        </select>
                        
                        <select id="kanbanFilterPriority" onchange="loadKanban()" class="px-3 py-2 text-sm border rounded-lg bg-white">
                            <option value="">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                            <option value="high">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                            <option value="medium">üü° –°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="low">üü¢ –ù–∏–∑–∫–∏–π</option>
                        </select>
                    </div>
                    
                    <button 
                        onclick="clearKanbanFilters()"
                        class="mt-2 text-xs text-blue-600 hover:text-blue-800"
                    >
                        –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
                    </button>
                </div>
                
                <!-- –ö–∞–Ω–±–∞–Ω –¥–æ—Å–∫–∞ -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    
                    <!-- –ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é -->
                    <div class="bg-gray-50 rounded-lg p-3">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-semibold text-gray-700">üìù –ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é</h3>
                            <span class="text-xs bg-gray-200 px-2 py-1 rounded-full" id="kanban-todo-count">0</span>
                        </div>
                        <div id="kanban-todo" class="space-y-2 min-h-[200px]">
                            <!-- –ó–∞–¥–∞—á–∏ -->
                        </div>
                    </div>
                    
                    <!-- –í —Ä–∞–±–æ—Ç–µ -->
                    <div class="bg-blue-50 rounded-lg p-3">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-semibold text-blue-700">‚ö° –í —Ä–∞–±–æ—Ç–µ</h3>
                            <span class="text-xs bg-blue-200 px-2 py-1 rounded-full" id="kanban-progress-count">0</span>
                        </div>
                        <div id="kanban-in_progress" class="space-y-2 min-h-[200px]">
                            <!-- –ó–∞–¥–∞—á–∏ -->
                        </div>
                    </div>
                    
                    <!-- –ó–∞–≤–µ—Ä—à–µ–Ω–æ -->
                    <div class="bg-green-50 rounded-lg p-3">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-semibold text-green-700">‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ</h3>
                            <span class="text-xs bg-green-200 px-2 py-1 rounded-full" id="kanban-done-count">0</span>
                        </div>
                        <div id="kanban-done" class="space-y-2 min-h-[200px]">
                            <!-- –ó–∞–¥–∞—á–∏ -->
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>

        <!-- ========== –í–ö–õ–ê–î–ö–ê: –î–ê–®–ë–û–†–î ========== -->
        <div id="view-dashboard" class="tab-content hidden">
            <div class="space-y-4">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
                <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                    <div class="bg-white rounded-lg shadow-md p-4">
                        <p class="text-xs text-gray-600 mb-1">–í—Å–µ–≥–æ –∑–∞–¥–∞—á</p>
                        <p class="text-2xl font-bold text-blue-600" id="dash-total-tasks">0</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-4">
                        <p class="text-xs text-gray-600 mb-1">–ê–∫—Ç–∏–≤–Ω—ã—Ö</p>
                        <p class="text-2xl font-bold text-orange-600" id="dash-active-tasks">0</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-4">
                        <p class="text-xs text-gray-600 mb-1">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</p>
                        <p class="text-2xl font-bold text-green-600" id="dash-completed-tasks">0</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-4">
                        <p class="text-xs text-gray-600 mb-1">–ü—Ä–æ—Ü–µ–Ω—Ç</p>
                        <p class="text-2xl font-bold text-purple-600" id="dash-completion-rate">0%</p>
                    </div>
                </div>
                
                <!-- –ì—Ä–∞—Ñ–∏–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
                <div class="bg-white rounded-lg shadow-md p-4 sm:p-6">
                    <h3 class="font-bold text-gray-800 mb-4">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞ –Ω–µ–¥–µ–ª—é</h3>
                    <div class="h-64 flex items-end justify-between gap-2 border-b border-gray-200 pb-2 mb-2">
                        <div id="chart-container" class="flex items-end justify-between gap-2 w-full h-full">
                            <!-- –ì—Ä–∞—Ñ–∏–∫ -->
                        </div>
                    </div>
                </div>
                
                <!-- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <!-- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã -->
                    <div class="bg-white rounded-lg shadow-md p-4 sm:p-6">
                        <h3 class="font-bold text-gray-800 mb-4">–ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º</h3>
                        <div class="space-y-3">
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>üî¥ –í—ã—Å–æ–∫–∏–π</span>
                                    <span id="dash-priority-high">0</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-red-500 h-2 rounded-full" id="dash-priority-high-bar" style="width: 0%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>üü° –°—Ä–µ–¥–Ω–∏–π</span>
                                    <span id="dash-priority-medium">0</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-yellow-500 h-2 rounded-full" id="dash-priority-medium-bar" style="width: 0%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>üü¢ –ù–∏–∑–∫–∏–π</span>
                                    <span id="dash-priority-low">0</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" id="dash-priority-low-bar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –î–µ–¥–ª–∞–π–Ω—ã -->
                    <div class="bg-white rounded-lg shadow-md p-4 sm:p-6">
                        <h3 class="font-bold text-gray-800 mb-4">–î–µ–¥–ª–∞–π–Ω—ã</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <span class="text-2xl">‚è∞</span>
                                    <div>
                                        <p class="text-sm font-medium">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ</p>
                                        <p class="text-xs text-gray-500">–¢—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è</p>
                                    </div>
                                </div>
                                <p class="text-2xl font-bold text-red-600" id="dash-overdue">0</p>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <span class="text-2xl">üìÖ</span>
                                    <div>
                                        <p class="text-sm font-medium">–ù–∞ –Ω–µ–¥–µ–ª—é</p>
                                        <p class="text-xs text-gray-500">–ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏</p>
                                    </div>
                                </div>
                                <p class="text-2xl font-bold text-blue-600" id="dash-week">0</p>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <span class="text-2xl">üìÅ</span>
                                    <div>
                                        <p class="text-sm font-medium">–ü—Ä–æ–µ–∫—Ç–æ–≤</p>
                                        <p class="text-xs text-gray-500">–ê–∫—Ç–∏–≤–Ω—ã—Ö</p>
                                    </div>
                                </div>
                                <p class="text-2xl font-bold text-purple-600" id="dash-projects">0</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ========== –í–ö–õ–ê–î–ö–ê: –ö–ê–õ–ï–ù–î–ê–†–¨ ========== -->
        <div id="view-calendar" class="tab-content hidden">
            <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4">
                <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
                <div class="flex items-center justify-between mb-4">
                    <button onclick="changeMonth(-1)" class="px-3 py-1 border rounded hover:bg-gray-50">‚Üê</button>
                    <h2 class="text-lg font-bold" id="calendarMonth">–ú–µ—Å—è—Ü</h2>
                    <button onclick="changeMonth(1)" class="px-3 py-1 border rounded hover:bg-gray-50">‚Üí</button>
                </div>
                
                <!-- –§–∏–ª—å—Ç—Ä—ã –∫–∞–ª–µ–Ω–¥–∞—Ä—è -->
                <div class="flex gap-2 mb-4">
                    <select id="calendarFilterProject" onchange="loadCalendar()" class="px-3 py-1.5 text-sm border rounded-lg">
                        <option value="">–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</option>
                    </select>
                    <select id="calendarFilterPriority" onchange="loadCalendar()" class="px-3 py-1.5 text-sm border rounded-lg">
                        <option value="">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                        <option value="high">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                        <option value="medium">üü° –°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="low">üü¢ –ù–∏–∑–∫–∏–π</option>
                    </select>
                    <button onclick="jumpToToday()" class="px-3 py-1.5 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                        –°–µ–≥–æ–¥–Ω—è
                    </button>
                </div>
                
                <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
                <div class="grid grid-cols-7 gap-1" id="calendarGrid">
                    <!-- –î–Ω–∏ –Ω–µ–¥–µ–ª–∏ -->
                    <div class="text-center text-xs font-semibold text-gray-600 py-2">–ü–Ω</div>
                    <div class="text-center text-xs font-semibold text-gray-600 py-2">–í—Ç</div>
                    <div class="text-center text-xs font-semibold text-gray-600 py-2">–°—Ä</div>
                    <div class="text-center text-xs font-semibold text-gray-600 py-2">–ß—Ç</div>
                    <div class="text-center text-xs font-semibold text-gray-600 py-2">–ü—Ç</div>
                    <div class="text-center text-xs font-semibold text-gray-600 py-2">–°–±</div>
                    <div class="text-center text-xs font-semibold text-gray-600 py-2">–í—Å</div>
                </div>
                
                <!-- –õ–µ–≥–µ–Ω–¥–∞ -->
                <div class="flex gap-4 mt-4 text-xs">
                    <div class="flex items-center gap-1">
                        <div class="w-3 h-3 bg-red-200 rounded"></div>
                        <span>–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</span>
                    </div>
                    <div class="flex items-center gap-1">
                        <div class="w-3 h-3 bg-yellow-200 rounded"></div>
                        <span>–°—Ä–µ–¥–Ω–∏–π</span>
                    </div>
                    <div class="flex items-center gap-1">
                        <div class="w-3 h-3 bg-green-200 rounded"></div>
                        <span>–ù–∏–∑–∫–∏–π</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ========== –í–ö–õ–ê–î–ö–ê: –ü–†–û–ï–ö–¢–´ ========== -->
        <div id="view-projects" class="tab-content hidden">
            <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4">
                
                <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ -->
                <div class="mb-4">
                    <button 
                        onclick="toggleProjectForm()"
                        class="w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 active:bg-green-700 transition-colors flex items-center justify-center gap-2"
                    >
                        <span>+</span>
                        <span>–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</span>
                    </button>
                </div>
                
                <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (—Å–∫—Ä—ã—Ç–∞) -->
                <div id="projectFormContainer" class="hidden mb-6 p-4 bg-gray-50 rounded-lg border-2 border-green-200">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="font-semibold text-gray-700">–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç</h3>
                        <button onclick="toggleProjectForm()" class="text-gray-500 hover:text-gray-700">‚úï</button>
                    </div>
                    
                    <input 
                        type="text" 
                        id="newProjectName" 
                        placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞..."
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 mb-2"
                    >
                    <textarea 
                        id="newProjectDescription" 
                        placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)..."
                        rows="2"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 mb-2"
                    ></textarea>
                    <div class="flex gap-2 mb-2">
                        <input 
                            type="text" 
                            id="newProjectIcon" 
                            placeholder="üìÅ"
                            maxlength="2"
                            class="w-16 px-2 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-green-500"
                        >
                        <input 
                            type="color" 
                            id="newProjectColor" 
                            value="#3B82F6"
                            class="w-16 h-10 border border-gray-300 rounded-lg cursor-pointer"
                        >
                    </div>
                    
                    <button 
                        onclick="addProject()"
                        class="w-full px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 active:bg-green-700 transition-colors"
                    >
                        –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
                    </button>
                </div>
                
                <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ -->
                <div id="projectList" class="space-y-3">
                    <p class="text-center text-gray-400 py-8">–ù–µ—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
                </div>
            </div>
        </div>
        
        <!-- ========== –í–ö–õ–ê–î–ö–ê: –ó–ê–ú–ï–¢–ö–ò ========== -->
        <div id="view-notes" class="tab-content hidden">
            <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4">
                
                <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏ -->
                <div class="mb-4">
                    <button 
                        onclick="toggleNoteForm()"
                        class="w-full px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 active:bg-purple-700 transition-colors flex items-center justify-center gap-2"
                    >
                        <span>+</span>
                        <span>–°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É</span>
                    </button>
                </div>
                
                <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏ (—Å–∫—Ä—ã—Ç–∞) -->
                <div id="noteFormContainer" class="hidden mb-6 p-4 bg-gray-50 rounded-lg border-2 border-purple-200">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="font-semibold text-gray-700">–ù–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞</h3>
                        <button onclick="toggleNoteForm()" class="text-gray-500 hover:text-gray-700">‚úï</button>
                    </div>
                    
                    <input 
                        type="text" 
                        id="newNoteTitle" 
                        placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–º–µ—Ç–∫–∏..."
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 mb-2"
                    >
                    <textarea 
                        id="newNoteContent" 
                        placeholder="–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏..."
                        rows="3"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 mb-2"
                    ></textarea>
                    <input 
                        type="text" 
                        id="newNoteTags" 
                        placeholder="–¢–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: –ø–æ–¥–∞—Ä–∫–∏, –∏–¥–µ–∏"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 mb-2"
                    >
                    
                    <button 
                        onclick="addNote()"
                        class="w-full px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 active:bg-purple-700 transition-colors"
                    >
                        –°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É
                    </button>
                </div>
                
                <!-- –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫ -->
                <div id="noteList" class="space-y-3">
                    <p class="text-center text-gray-400 py-8">–ù–µ—Ç –∑–∞–º–µ—Ç–æ–∫</p>
                </div>
            </div>
        </div>

        <!-- ========== –í–ö–õ–ê–î–ö–ê: –ù–ê–°–¢–†–û–ô–ö–ò ========== -->
        <div id="view-settings" class="tab-content hidden">
            <div class="space-y-4">
                <!-- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö -->
                <div class="bg-white rounded-lg shadow-md p-4 sm:p-6">
                    <h3 class="font-bold text-gray-800 mb-4">üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                    <div class="space-y-3">
                        <button onclick="exportTasks()" class="w-full px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center justify-between">
                            <span>–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏</span>
                            <span class="text-sm">CSV</span>
                        </button>
                        <button onclick="exportProjects()" class="w-full px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center justify-between">
                            <span>–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã</span>
                            <span class="text-sm">CSV</span>
                        </button>
                    </div>
                </div>
                
                <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–µ–¥–ª–∞–π–Ω–∞—Ö -->
                <div class="bg-white rounded-lg shadow-md p-4 sm:p-6">
                    <h3 class="font-bold text-gray-800 mb-4">üîî –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–¥–ª–∞–π–Ω–æ–≤</h3>
                    <button onclick="checkUpcomingDeadlines()" class="w-full px-4 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600">
                        –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–ª–∏–∂–∞–π—à–∏–µ –¥–µ–¥–ª–∞–π–Ω—ã
                    </button>
                    <div id="deadlineNotifications" class="mt-4"></div>
                </div>
                
                <!-- –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ -->
                <div class="bg-white rounded-lg shadow-md p-4 sm:p-6">
                    <h3 class="font-bold text-gray-800 mb-4">‚å®Ô∏è –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between py-2 border-b">
                            <span class="text-gray-600">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</span>
                            <kbd class="px-2 py-1 bg-gray-100 rounded">Ctrl + N</kbd>
                        </div>
                        <div class="flex justify-between py-2 border-b">
                            <span class="text-gray-600">–î–∞—à–±–æ—Ä–¥</span>
                            <kbd class="px-2 py-1 bg-gray-100 rounded">Ctrl + D</kbd>
                        </div>
                        <div class="flex justify-between py-2">
                            <span class="text-gray-600">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span>
                            <kbd class="px-2 py-1 bg-gray-100 rounded">Ctrl + C</kbd>
                        </div>
                    </div>
                </div>
                
                <!-- –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ -->
                <div class="bg-white rounded-lg shadow-md p-4 sm:p-6">
                    <h3 class="font-bold text-gray-800 mb-2">‚ÑπÔ∏è –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h3>
                    <p class="text-sm text-gray-600">–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ v1.0</p>
                    <p class="text-xs text-gray-500 mt-2">Telegram Mini App –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏</p>
                </div>
            </div>
        </div>

        <!-- ========== –í–ö–õ–ê–î–ö–ê: WORKSPACE ========== -->
        <div id="view-workspace" class="tab-content hidden">

            <!-- ========== WORKSPACE: –û–ë–ó–û–† ========== -->
            <div id="workspace-overview" class="workspace-content">
                <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4">
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-2">
                            <h2 class="text-xl font-bold" id="ws-project-name">–ü—Ä–æ–µ–∫—Ç</h2>
                            <button onclick="openEditProjectModal()" class="text-sm text-blue-600 hover:text-blue-800">
                                ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å
                            </button>
                        </div>
                        <p class="text-gray-600 text-sm" id="ws-project-description">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</p>
                    </div>
                    
                    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6">
                        <div class="bg-blue-50 rounded-lg p-4">
                            <p class="text-xs text-gray-600 mb-1">–í—Å–µ–≥–æ –∑–∞–¥–∞—á</p>
                            <p class="text-2xl font-bold text-blue-600" id="ws-total-tasks">0</p>
                        </div>
                        <div class="bg-green-50 rounded-lg p-4">
                            <p class="text-xs text-gray-600 mb-1">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</p>
                            <p class="text-2xl font-bold text-green-600" id="ws-completed-tasks">0</p>
                        </div>
                        <div class="bg-purple-50 rounded-lg p-4">
                            <p class="text-xs text-gray-600 mb-1">–≠—Ç–∞–ø–æ–≤</p>
                            <p class="text-2xl font-bold text-purple-600" id="ws-milestones-count">0</p>
                        </div>
                        <div class="bg-orange-50 rounded-lg p-4">
                            <p class="text-xs text-gray-600 mb-1">–ó–∞–º–µ—Ç–æ–∫</p>
                            <p class="text-2xl font-bold text-orange-600" id="ws-notes-count">0</p>
                        </div>
                    </div>
                    
                    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å -->
                    <div class="mb-6">
                        <div class="flex justify-between text-sm mb-2">
                            <span class="font-medium">–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</span>
                            <span class="text-gray-600" id="ws-progress-text">0%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div class="progress-bar bg-blue-500 h-3 rounded-full" id="ws-progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        <button onclick="switchWorkspaceTab('tasks')" class="p-4 border rounded-lg hover:bg-gray-50 text-left transition-colors">
                            <p class="font-semibold mb-1">‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</p>
                            <p class="text-xs text-gray-600">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –≤ –ø—Ä–æ–µ–∫—Ç–µ</p>
                        </button>
                        <button onclick="switchWorkspaceTab('roadmap')" class="p-4 border rounded-lg hover:bg-gray-50 text-left transition-colors">
                            <p class="font-semibold mb-1">üó∫Ô∏è –°–æ–∑–¥–∞—Ç—å —ç—Ç–∞–ø</p>
                            <p class="text-xs text-gray-600">–î–æ–±–∞–≤–∏—Ç—å milestone –≤ roadmap</p>
                        </button>
                        <button onclick="switchWorkspaceTab('notes')" class="p-4 border rounded-lg hover:bg-gray-50 text-left transition-colors">
                            <p class="font-semibold mb-1">üìù –ù–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞</p>
                            <p class="text-xs text-gray-600">–°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É –≤ –ø—Ä–æ–µ–∫—Ç–µ</p>
                        </button>
                        <button onclick="openEditProjectModal()" class="p-4 border rounded-lg hover:bg-gray-50 text-left transition-colors">
                            <p class="font-semibold mb-1">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</p>
                            <p class="text-xs text-gray-600">–ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ü–≤–µ—Ç, –∏–∫–æ–Ω–∫—É</p>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- ========== WORKSPACE: –ó–ê–î–ê–ß–ò ========== -->
            <div id="workspace-tasks" class="workspace-content hidden">
                <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4">
                    
                    <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
                    <div class="mb-4">
                        <button 
                            onclick="toggleWorkspaceTaskForm()"
                            class="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 active:bg-blue-700 transition-colors flex items-center justify-center gap-2"
                        >
                            <span>+</span>
                            <span>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</span>
                        </button>
                    </div>
                    
                    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ (—Å–∫—Ä—ã—Ç–∞) -->
                    <div id="wsTaskFormContainer" class="hidden mb-4 p-4 bg-gray-50 rounded-lg border-2 border-blue-200">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-semibold text-gray-700">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h3>
                            <button onclick="toggleWorkspaceTaskForm()" class="text-gray-500 hover:text-gray-700">‚úï</button>
                        </div>
                        
                        <input 
                            type="text" 
                            id="wsNewTaskInput" 
                            placeholder="–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2"
                        >
                        
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-2 mb-2">
                            <select id="wsTaskMilestone" class="px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">–ë–µ–∑ —ç—Ç–∞–ø–∞</option>
                            </select>
                            
                            <select id="wsTaskPriority" class="px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="low">–ù–∏–∑–∫–∏–π</option>
                                <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                            </select>
                            
                            <input 
                                type="datetime-local" 
                                id="wsTaskDeadline" 
                                class="px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            >
                        </div>
                        
                        <button 
                            onclick="addWorkspaceTask()"
                            class="w-full px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 active:bg-blue-700 transition-colors"
                        >
                            –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                        </button>
                    </div>
                    
                    <!-- –§–∏–ª—å—Ç—Ä –ø–æ —ç—Ç–∞–ø–∞–º -->
                    <div class="flex flex-wrap gap-2 mb-4 pb-4 border-b">
                        <select id="wsFilterMilestone" onchange="loadWorkspaceTasks()" class="px-3 py-1.5 text-sm border rounded-lg">
                            <option value="">–í—Å–µ —ç—Ç–∞–ø—ã</option>
                        </select>
                        
                        <select id="wsFilterPriority" onchange="loadWorkspaceTasks()" class="px-3 py-1.5 text-sm border rounded-lg">
                            <option value="">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                            <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                            <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="low">–ù–∏–∑–∫–∏–π</option>
                        </select>
                    </div>
                    
                    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
                    <div id="wsTaskList" class="space-y-2 max-h-96 overflow-y-auto custom-scrollbar">
                        <p class="text-center text-gray-400 py-8">–ù–µ—Ç –∑–∞–¥–∞—á –≤ –ø—Ä–æ–µ–∫—Ç–µ</p>
                    </div>
                </div>
            </div>
        
            <!-- ========== WORKSPACE: –ü–û–î–ü–†–û–ï–ö–¢–´ ========== -->
            <div id="workspace-subprojects" class="workspace-content hidden">
                <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4">
                    
                    <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–∞ -->
                    <div class="mb-4">
                        <button 
                            onclick="toggleSubprojectForm()"
                            class="w-full px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 active:bg-purple-700 transition-colors flex items-center justify-center gap-2"
                        >
                            <span>+</span>
                            <span>–°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø—Ä–æ–µ–∫—Ç</span>
                        </button>
                    </div>
                    
                    <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–∞ (—Å–∫—Ä—ã—Ç–∞) -->
                    <div id="subprojectFormContainer" class="hidden mb-6 p-4 bg-gray-50 rounded-lg border-2 border-purple-200">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-semibold text-gray-700">–ù–æ–≤—ã–π –ø–æ–¥–ø—Ä–æ–µ–∫—Ç</h3>
                            <button onclick="toggleSubprojectForm()" class="text-gray-500 hover:text-gray-700">‚úï</button>
                        </div>
                        
                        <input 
                            type="text" 
                            id="newSubprojectName" 
                            placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤)..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 mb-2"
                        >
                        
                        <textarea 
                            id="newSubprojectDescription" 
                            placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)..."
                            rows="2"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 mb-2"
                        ></textarea>
                        
                        <div class="flex gap-2 mb-2">
                            <input 
                                type="text" 
                                id="newSubprojectIcon" 
                                placeholder="üìÅ"
                                maxlength="2"
                                class="w-16 px-2 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-purple-500"
                            >
                            <input 
                                type="color" 
                                id="newSubprojectColor" 
                                value="#3B82F6"
                                class="w-16 h-10 border border-gray-300 rounded-lg cursor-pointer"
                            >
                        </div>
                        
                        <button 
                            onclick="addSubproject()"
                            class="w-full px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 active:bg-purple-700 transition-colors"
                        >
                            –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø—Ä–æ–µ–∫—Ç
                        </button>
                    </div>
                    
                    <!-- –°–ø–∏—Å–æ–∫ –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–æ–≤ -->
                    <div id="subprojectList" class="space-y-3">
                        <p class="text-center text-gray-400 py-8">–ù–µ—Ç –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–æ–≤</p>
                    </div>
                </div>
            </div>
        
            <!-- ========== –î–ï–¢–ê–õ–¨–ù–´–ô –í–ò–î –ü–û–î–ü–†–û–ï–ö–¢–ê ========== -->
            <div id="subproject-detail-view" class="hidden">
                <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4">
                    
                    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
                    <div class="flex items-center justify-between mb-4">
                        <button onclick="closeSubprojectDetail()" class="text-blue-600 hover:text-blue-800">
                            ‚Üê –ù–∞–∑–∞–¥ –∫ –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–∞–º
                        </button>
                        <button onclick="openEditSubprojectModal()" class="text-sm text-gray-600 hover:text-gray-800">
                            ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å
                        </button>
                    </div>
                    
                    <div class="mb-6">
                        <div class="flex items-center gap-3 mb-2">
                            <span class="text-3xl" id="subproject-detail-icon">üìÅ</span>
                            <div>
                                <h2 class="text-xl font-bold" id="subproject-detail-name">–ü–æ–¥–ø—Ä–æ–µ–∫—Ç</h2>
                                <p class="text-sm text-gray-600" id="subproject-detail-description">–û–ø–∏—Å–∞–Ω–∏–µ</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –¢–∞–±—ã –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–∞ -->
                    <div class="flex gap-2 border-b mb-4 overflow-x-auto">
                        <button onclick="switchSubprojectTab('data')" id="sp-tab-data" class="sp-tab-btn px-4 py-2 font-medium border-b-2 border-blue-500 text-blue-600">
                            üìù –î–∞–Ω–Ω—ã–µ
                        </button>
                        <button onclick="switchSubprojectTab('tasks')" id="sp-tab-tasks" class="sp-tab-btn px-4 py-2 font-medium border-b-2 border-transparent text-gray-600">
                            ‚úÖ –ó–∞–¥–∞—á–∏
                        </button>
                        <button onclick="switchSubprojectTab('notes')" id="sp-tab-notes" class="sp-tab-btn px-4 py-2 font-medium border-b-2 border-transparent text-gray-600">
                            üìì –ó–∞–º–µ—Ç–∫–∏
                        </button>
                        <button onclick="switchSubprojectTab('tables')" id="sp-tab-tables" class="sp-tab-btn px-4 py-2 font-medium border-b-2 border-transparent text-gray-600">
                            üìä –¢–∞–±–ª–∏—Ü—ã
                        </button>
                    </div>
                    
                    <!-- === –î–ê–ù–ù–´–ï === -->
                    <div id="sp-content-data" class="sp-content">
                        <h3 class="font-bold mb-3">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è</h3>
                        <div id="customFieldsList" class="space-y-2 mb-4">
                            <p class="text-gray-400 text-sm">–ù–µ—Ç –ø–æ–ª–µ–π. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–µ –ø–æ–ª–µ.</p>
                        </div>
                        <button onclick="openAddFieldModal()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                            + –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ
                        </button>
                    </div>
                    
                    <!-- === –ó–ê–î–ê–ß–ò === -->
                    <div id="sp-content-tasks" class="sp-content hidden">
                        <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
                        <div class="mb-4">
                            <button 
                                onclick="toggleSpTaskForm()"
                                class="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center justify-center gap-2"
                            >
                                <span>+</span>
                                <span>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</span>
                            </button>
                        </div>
                        
                        <!-- –§–æ—Ä–º–∞ (—Å–∫—Ä—ã—Ç–∞) -->
                        <div id="spTaskFormContainer" class="hidden mb-4 p-4 bg-gray-50 rounded-lg border-2 border-blue-200">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="font-semibold text-gray-700">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h3>
                                <button onclick="toggleSpTaskForm()" class="text-gray-500 hover:text-gray-700">‚úï</button>
                            </div>
                            
                            <input 
                                type="text" 
                                id="spNewTaskInput" 
                                placeholder="–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞..."
                                class="w-full px-4 py-2 border rounded-lg mb-2"
                            >
                            <div class="grid grid-cols-1 sm:grid-cols-3 gap-2 mb-2">
                                <select id="spTaskPriority" class="px-3 py-2 border rounded-lg">
                                    <option value="low">–ù–∏–∑–∫–∏–π</option>
                                    <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                                    <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                                </select>
                                <input type="datetime-local" id="spTaskDeadline" class="px-3 py-2 border rounded-lg" colspan="2">
                            </div>
                            <button onclick="addSubprojectTask()" class="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                –î–æ–±–∞–≤–∏—Ç—å
                            </button>
                        </div>
                        
                        <div id="spTaskList" class="space-y-2">
                            <p class="text-center text-gray-400 py-8">–ù–µ—Ç –∑–∞–¥–∞—á</p>
                        </div>
                    </div>
                    
                    <!-- === –ó–ê–ú–ï–¢–ö–ò === -->
                    <div id="sp-content-notes" class="sp-content hidden">
                        <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
                        <div class="mb-4">
                            <button 
                                onclick="toggleSpNoteForm()"
                                class="w-full px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 flex items-center justify-center gap-2"
                            >
                                <span>+</span>
                                <span>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É</span>
                            </button>
                        </div>
                        
                        <!-- –§–æ—Ä–º–∞ (—Å–∫—Ä—ã—Ç–∞) -->
                        <div id="spNoteFormContainer" class="hidden mb-4 p-4 bg-gray-50 rounded-lg border-2 border-purple-200">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="font-semibold text-gray-700">–ù–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞</h3>
                                <button onclick="toggleSpNoteForm()" class="text-gray-500 hover:text-gray-700">‚úï</button>
                            </div>
                            
                            <textarea 
                                id="spNewNoteInput" 
                                placeholder="–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É..."
                                rows="3"
                                class="w-full px-4 py-2 border rounded-lg mb-2"
                            ></textarea>
                            <button onclick="addSubprojectNote()" class="w-full px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600">
                                –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É
                            </button>
                        </div>
                        
                        <div id="spNoteList" class="space-y-3">
                            <p class="text-center text-gray-400 py-8">–ù–µ—Ç –∑–∞–º–µ—Ç–æ–∫</p>
                        </div>
                    </div>
                    
                    <!-- === –¢–ê–ë–õ–ò–¶–´ === -->
                    <div id="sp-content-tables" class="sp-content hidden">
                        <button onclick="openCreateTableModal()" class="mb-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                            + –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É
                        </button>
                        <div id="spTableList" class="space-y-4">
                            <p class="text-center text-gray-400 py-8">–ù–µ—Ç —Ç–∞–±–ª–∏—Ü</p>
                        </div>
                    </div>
                    
                </div>
            </div>
            
            <!-- ========== WORKSPACE: ROADMAP ========== -->
            <div id="workspace-roadmap" class="workspace-content hidden">
                <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4">
                    
                    <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
                    <div class="mb-4">
                        <button 
                            onclick="toggleMilestoneForm()"
                            class="w-full px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 active:bg-indigo-700 transition-colors flex items-center justify-center gap-2"
                        >
                            <span>+</span>
                            <span>–°–æ–∑–¥–∞—Ç—å —ç—Ç–∞–ø</span>
                        </button>
                    </div>
                    
                    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è milestone (—Å–∫—Ä—ã—Ç–∞) -->
                    <div id="milestoneFormContainer" class="hidden mb-6 p-4 bg-gray-50 rounded-lg border-2 border-indigo-200">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-semibold text-gray-700">–ù–æ–≤—ã–π —ç—Ç–∞–ø</h3>
                            <button onclick="toggleMilestoneForm()" class="text-gray-500 hover:text-gray-700">‚úï</button>
                        </div>
                        
                        <input 
                            type="text" 
                            id="newMilestoneName" 
                            placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —ç—Ç–∞–ø–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-2"
                        >
                        <textarea 
                            id="newMilestoneDescription" 
                            placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–∞–ø–∞..."
                            rows="2"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-2"
                        ></textarea>
                        <div class="grid grid-cols-2 gap-2 mb-2">
                            <input 
                                type="date" 
                                id="milestoneStartDate" 
                                class="px-3 py-2 border rounded-lg"
                                placeholder="–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞"
                            >
                            <input 
                                type="date" 
                                id="milestoneEndDate" 
                                class="px-3 py-2 border rounded-lg"
                                placeholder="–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è"
                            >
                        </div>
                        
                        <button 
                            onclick="addMilestone()"
                            class="w-full px-6 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors"
                        >
                            –°–æ–∑–¥–∞—Ç—å —ç—Ç–∞–ø
                        </button>
                    </div>
                    
                    <!-- Roadmap (—Å–ø–∏—Å–æ–∫ —ç—Ç–∞–ø–æ–≤) -->
                    <div id="milestoneList" class="space-y-4">
                        <p class="text-center text-gray-400 py-8">–ù–µ—Ç —ç—Ç–∞–ø–æ–≤. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π!</p>
                    </div>
                </div>
            </div>
            
            <!-- ========== WORKSPACE: –ó–ê–ú–ï–¢–ö–ò ========== -->
            <div id="workspace-notes" class="workspace-content hidden">
                <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4">
                    
                    <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏ -->
                    <div class="mb-4">
                        <button 
                            onclick="toggleProjectNoteForm()"
                            class="w-full px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 active:bg-purple-700 transition-colors flex items-center justify-center gap-2"
                        >
                            <span>+</span>
                            <span>–°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É</span>
                        </button>
                    </div>
                    
                    <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏ (—Å–∫—Ä—ã—Ç–∞) -->
                    <div id="projectNoteFormContainer" class="hidden mb-6 p-4 bg-gray-50 rounded-lg border-2 border-purple-200">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-semibold text-gray-700">–ù–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞</h3>
                            <button onclick="toggleProjectNoteForm()" class="text-gray-500 hover:text-gray-700">‚úï</button>
                        </div>
                        
                        <input 
                            type="text" 
                            id="newProjectNoteTitle" 
                            placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–º–µ—Ç–∫–∏..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 mb-2"
                        >
                        
                        <textarea 
                            id="newProjectNoteContent" 
                            placeholder="–¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏..."
                            rows="4"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 mb-2"
                        ></textarea>
                        
                        <button 
                            onclick="addProjectNote()"
                            class="w-full px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"
                        >
                            –°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É
                        </button>
                    </div>
                    
                    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫ -->
                    <div id="projectNoteList" class="space-y-3">
                        <p class="text-center text-gray-400 py-8">–ù–µ—Ç –∑–∞–º–µ—Ç–æ–∫</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ========== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê ========== -->
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <div id="editTaskModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg max-w-md w-full p-6">
            <h3 class="text-lg font-bold mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É</h3>
            
            <input type="hidden" id="editTaskId">
            
            <label class="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
            <input 
                type="text" 
                id="editTaskTitle" 
                class="w-full px-4 py-2 border rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
            
            <label class="block text-sm font-medium mb-1">–û–ø–∏—Å–∞–Ω–∏–µ</label>
            <textarea 
                id="editTaskDescription" 
                rows="3"
                class="w-full px-4 py-2 border rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
            ></textarea>
            
            <label class="block text-sm font-medium mb-1">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
            <select id="editTaskPriority" class="w-full px-3 py-2 border rounded-lg mb-3">
                <option value="low">–ù–∏–∑–∫–∏–π</option>
                <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
                <option value="high">–í—ã—Å–æ–∫–∏–π</option>
            </select>
            
            <label class="block text-sm font-medium mb-1">–î–µ–¥–ª–∞–π–Ω</label>
            <input 
                type="datetime-local" 
                id="editTaskDeadline" 
                class="w-full px-3 py-2 border rounded-lg mb-4"
            >
            
            <div class="flex gap-2">
                <button 
                    onclick="saveTaskEdit()"
                    class="flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                >
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                </button>
                <button 
                    onclick="closeEditTaskModal()"
                    class="flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"
                >
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ -->
    <div id="editProjectModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg max-w-md w-full p-6">
            <h3 class="text-lg font-bold mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</h3>
            
            <label class="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
            <input 
                type="text" 
                id="editProjectName" 
                class="w-full px-4 py-2 border rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
            
            <label class="block text-sm font-medium mb-1">–û–ø–∏—Å–∞–Ω–∏–µ</label>
            <textarea 
                id="editProjectDescription" 
                rows="3"
                class="w-full px-4 py-2 border rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
            ></textarea>
            
            <div class="flex gap-2 mb-4">
                <div class="flex-1">
                    <label class="block text-sm font-medium mb-1">–ò–∫–æ–Ω–∫–∞</label>
                    <input 
                        type="text" 
                        id="editProjectIcon" 
                        maxlength="2"
                        class="w-full px-2 py-2 border rounded-lg text-center"
                    >
                </div>
                <div class="flex-1">
                    <label class="block text-sm font-medium mb-1">–¶–≤–µ—Ç</label>
                    <input 
                        type="color" 
                        id="editProjectColor" 
                        class="w-full h-10 border rounded-lg cursor-pointer"
                    >
                </div>
            </div>
            
            <div class="flex gap-2">
                <button 
                    onclick="saveProjectEdit()"
                    class="flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                >
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                </button>
                <button 
                    onclick="closeEditProjectModal()"
                    class="flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"
                >
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>

    <!-- ========== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê –î–õ–Ø –ü–û–î–ü–†–û–ï–ö–¢–û–í ========== -->

    <!-- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ -->
    <div id="addFieldModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg max-w-md w-full p-6">
            <h3 class="text-lg font-bold mb-4">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ</h3>
            
            <label class="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è</label>
            <input type="text" id="fieldName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –õ–æ–≥–∏–Ω" class="w-full px-4 py-2 border rounded-lg mb-3">
            
            <label class="block text-sm font-medium mb-1">–¢–∏–ø –ø–æ–ª—è</label>
            <select id="fieldType" class="w-full px-3 py-2 border rounded-lg mb-3">
                <option value="text">üìù –¢–µ–∫—Å—Ç</option>
                <option value="password">üîí –ü–∞—Ä–æ–ª—å (—Å–∫—Ä—ã—Ç—ã–π)</option>
                <option value="email">üìß Email</option>
                <option value="phone">üì± –¢–µ–ª–µ—Ñ–æ–Ω</option>
                <option value="url">üîó –°—Å—ã–ª–∫–∞</option>
                <option value="date">üìÖ –î–∞—Ç–∞</option>
                <option value="number">üî¢ –ß–∏—Å–ª–æ</option>
            </select>
            
            <label class="block text-sm font-medium mb-1">–ó–Ω–∞—á–µ–Ω–∏–µ</label>
            <input type="text" id="fieldValue" placeholder="ivan123" class="w-full px-4 py-2 border rounded-lg mb-4">
            
            <div class="flex gap-2">
                <button onclick="saveCustomField()" class="flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                    –î–æ–±–∞–≤–∏—Ç—å
                </button>
                <button onclick="closeAddFieldModal()" class="flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>

    <!-- –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É -->
    <div id="createTableModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto">
            <h3 class="text-lg font-bold mb-4">–°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É</h3>
            
            <label class="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã</label>
            <input type="text" id="tableName" placeholder="–†–∞–±–æ—Ç—ã –û–ú–ì–ê" class="w-full px-4 py-2 border rounded-lg mb-4">
            
            <label class="block text-sm font-medium mb-2">–ö–æ–ª–æ–Ω–∫–∏</label>
            <div id="tableColumns" class="space-y-2 mb-4">
                <div class="flex gap-2">
                    <input type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏" class="flex-1 px-3 py-2 border rounded-lg table-col-name">
                    <select class="px-3 py-2 border rounded-lg table-col-type">
                        <option value="text">–¢–µ–∫—Å—Ç</option>
                        <option value="number">–ß–∏—Å–ª–æ</option>
                        <option value="date">–î–∞—Ç–∞</option>
                        <option value="checkbox">–ß–µ–∫–±–æ–∫—Å</option>
                        <option value="select">–í—ã–±–æ—Ä</option>
                    </select>
                    <button onclick="removeTableColumn(this)" class="px-3 py-2 text-red-500 hover:bg-red-50 rounded-lg">‚úï</button>
                </div>
            </div>
            <button onclick="addTableColumn()" class="mb-4 px-4 py-2 border border-dashed border-gray-300 rounded-lg hover:bg-gray-50 w-full">
                + –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É
            </button>
            
            <label class="block text-sm font-medium mb-1">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫</label>
            <input type="number" id="tableRows" value="3" min="0" max="50" class="w-full px-4 py-2 border rounded-lg mb-4">
            
            <div class="flex gap-2">
                <button onclick="createTable()" class="flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                    –°–æ–∑–¥–∞—Ç—å
                </button>
                <button onclick="closeCreateTableModal()" class="flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>

    <!-- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø—Ä–æ–µ–∫—Ç -->
    <div id="editSubprojectModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg max-w-md w-full p-6">
            <h3 class="text-lg font-bold mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø—Ä–æ–µ–∫—Ç</h3>
            
            <label class="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
            <input type="text" id="editSubprojectName" class="w-full px-4 py-2 border rounded-lg mb-3">
            
            <label class="block text-sm font-medium mb-1">–û–ø–∏—Å–∞–Ω–∏–µ</label>
            <textarea id="editSubprojectDescription" rows="3" class="w-full px-4 py-2 border rounded-lg mb-3"></textarea>
            
            <div class="flex gap-2 mb-4">
                <div class="flex-1">
                    <label class="block text-sm font-medium mb-1">–ò–∫–æ–Ω–∫–∞</label>
                    <input type="text" id="editSubprojectIcon" maxlength="2" class="w-full px-2 py-2 border rounded-lg text-center">
                </div>
                <div class="flex-1">
                    <label class="block text-sm font-medium mb-1">–¶–≤–µ—Ç</label>
                    <input type="color" id="editSubprojectColor" class="w-full h-10 border rounded-lg cursor-pointer">
                </div>
            </div>
            
            <div class="flex gap-2">
                <button onclick="saveSubprojectEdit()" class="flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                </button>
                <button onclick="closeEditSubprojectModal()" class="flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π -->
    <script src="js/main.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/kanban.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/tasks.js"></script>
    <script src="js/projects.js"></script>
    <script src="js/workspace.js"></script>
    <script src="js/notes.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/subprojects.js"></script>
    <script src="js/tables.js"></script>
</body>
</html>